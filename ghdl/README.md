# GHDL Open-Source Simulator by Tristan Gingold

## [Getting Started With VHDL on Linux (GHDL & GTKWave)](https://www.youtube.com/watch?v=dvLeDNbXfFw) by Nerdy Dave
  * [Ubuntu](https://en.wikipedia.org/wiki/Ubuntu) 20.04
  * GHDL 2.0.0
  * [GNAT](https://en.wikipedia.org/wiki/GNAT) 9.3.0
```sh
$ cat /etc/os-release
$ sudo apt update
$ sudo apt install gtkwave
$ sudo apt install git make gnat zlib1g-dev
$ git clone https://github.com/ghdl/ghdl
$ cd ghdl
$ ./configure --prefix=/usr/local
$ make
$ sudo make install
```
## [Getting Started With VHDL on Windows (GHDL & GTKWave)](https://www.youtube.com/watch?v=H2GyAIYwZbw) by Nerdy Dave

* Download [Notepad++](https://en.wikipedia.org/wiki/Notepad%2B%2B) Installer: [Current Version](https://notepad-plus-plus.org/)
* Download [GHDL](https://github.com/ghdl/ghdl/releases)
  * ghdl-0.37-mingw32-mcode.zip
  * Extract All... > ghdl-0.37-mingw32-mcode
* Download [GTKWave](https://sourceforge.net/projects/gtkwave/files)
  * gtkwave-3.3.100-bin-win32.zip
  * Extract All... > gtkwave-3.3.100-bin-win32
* File Explorer > This PC > OS (C:) > New folder > eda
  * Rename the subfolder "This PC > Downloads > ghdl-0.37-mingw32-mcode > GHDL > 0.37-mingw32-mcode" as ghdl and move it to C:\eda
  * Move the subfolder "This PC > Downloads > gtkwave-3.3.100-bin-win32 > gtkwave" to C:\eda
* Edit Environment Variables > Path > New
  * C:\eda\ghdl\bin
  * C:\eda\gtkwave\bin

## On macOS, download [GHDL](https://github.com/ghdl/ghdl/releases) and [GTKWave](https://sourceforge.net/projects/gtkwave/files)
> [Use Homebrew to install GTKWave](https://formulae.brew.sh/cask/gtkwave)\
> [Compatibility issue](https://github.com/gtkwave/gtkwave/issues/250)\
> [GTKWave on Flathub](https://flathub.org/apps/io.github.gtkwave.GTKWave)\
```
flatpak install flathub io.github.gtkwave.GTKWave
flatpak run io.github.gtkwave.GTKWave
```
> [Fliplot](https://github.com/raczben/fliplot) is an alternative to GTKWave, implemented in HTML, JavaScript, and Python\
> [HDL Containers](https://hdl.github.io/containers/)

* Open a Terminal
```sh
$ cd Downloads
$ sudo mv ghdl-0.37-macosx-mcode /usr/local
$ cd
$ sudo nano /etc/paths
```
* Go to the bottom of the file, and enter
```sh
/usr/local/ghdl-0.37-macosx-mcode/bin
```
* Hit control-x to quit
* Enter “Y” to save the modified buffer
* Close the Terminal

## Open GTKWave Wave Viewer on macOS
```sh
GTKWave > File > Open New Tab > Select a folder and a VCD file to load
```

## [GHDL Quick Start Guide](https://ghdl.github.io/ghdl/quick_start/index.html)

* Open a [Terminal](https://en.wikipedia.org/wiki/Terminal_(macOS)) on macOS or GNU/Linux, or [Windows Terminal](https://en.wikipedia.org/wiki/Windows_Terminal) on Windows
* Clone 'dsd' repository, make and change directory to a new 'vhdl' directory, copy vhdl code to the current directory '.'
```sh
$ git clone https://github.com/kevinwlu/dsd.git
$ mkdir vhdl
$ cd vhdl
$ cp ~/dsd/ghdl/*vhdl .
```
* GHDL can run on a Terminal on macOS or GNU/Linux, or on Windows with Windows Terminal, Git Bash, PowerShell, or Command Prompt
  * Apple menu > System Preferences > Security & Privacy > General > Allow ghdl
* GHDL options: help, version, analyze, elaborate, run
* [Value change dump](https://en.wikipedia.org/wiki/Value_change_dump) (VCD) is a format for files generated by simulation tools for logging signal strength and directionality

## [Hello, World](https://en.wikipedia.org/wiki/%22Hello,_World!%22_program)
```sh
$ ghdl -h
$ ghdl -v
$ ghdl -a hello.vhdl
$ ghdl -e hello_world
$ ghdl -r hello_world
Hello world!
```
## [Adder](https://en.wikipedia.org/wiki/Adder_(electronics))

### Half Adder
```sh
$ ghdl -a ha.vhdl
$ ghdl -a ha_tb.vhdl
$ ghdl -e ha_tb
$ ghdl -r ha_tb --vcd=ha.vcd
ha_tb.vhdl:47:5:@5ns:(assertion error): Reached end of test
$ gtkwave ha.vcd
```
![ha.png](/ghdl/ha.png)

### [Full Adder](http://ghdl.free.fr/ghdl/A-full-adder.html)
```sh
$ ghdl -a adder.vhdl
$ ghdl -a adder_tb.vhdl
$ ghdl -e adder_tb
$ ghdl -r adder_tb --vcd=adder.vcd
adder_tb.vhdl:54:5:@8ns(assertion note): end of test
$ gtkwave adder.vcd
```
![adder.png](/ghdl/adder.png)
## [Flip-flop](https://en.wikipedia.org/wiki/Flip-flop_(electronics))

### [D Flip-flop](https://electronicstopper.blogspot.com/2017/07/d-flip-flop-in-vhdl-with-testbench.html)
```sh
$ ghdl -a dff.vhdl
$ ghdl -a dff_tb.vhdl
$ ghdl -e dff_tb
$ ghdl -r dff_tb --vcd=dff.vcd
$ gtkwave dff.vcd
```
![dff.png](/ghdl/dff.png)

### [T Flip-flop](https://electronicstopper.blogspot.com/2017/07/t-flip-flop-in-vhdl-with-testbench.html)
```sh
$ ghdl -a tff.vhdl
$ ghdl -a tff_tb.vhdl
$ ghdl -e tff_tb
$ ghdl -r tff_tb --vcd=tff.vcd
$ gtkwave tff.vcd
```
![tff.png](/ghdl/tff.png)

## [Multiplexer](https://en.wikipedia.org/wiki/Multiplexer)

### [4-to-1 Multiplexer](https://allaboutfpga.com/vhdl-4-to-1-mux-multiplexer)
```sh
$ ghdl -a mux.vhdl
$ ghdl -a mux_tb.vhdl
$ ghdl -e mux_tb
$ ghdl -r mux_tb --vcd=mux.vcd
$ gtkwave mux.vcd
```
![mux.png](/ghdl/mux.png)

### [1-to-4 Demultiplexer](https://allaboutfpga.com/vhdl-code-for-1-to-4-demux)
```sh
$ ghdl -a demux.vhdl
$ ghdl -a demux_tb.vhdl
$ ghdl -e demux_tb
$ ghdl -r demux_tb --vcd=demux.vcd
$ gtkwave demux.vcd
```
![demux.png](/ghdl/demux.png)

## SR Flip-flop
* [Reference](https://technobyte.org/vhdl-code-flip-flops-behavioral/)
```sh
$ ghdl -a --ieee=synopsys sr_ff.vhdl
$ ghdl -a --ieee=synopsys sr_ff_tb.vhdl
$ ghdl -e --ieee=synopsys sr_ff_tb
$ ghdl -r --ieee=synopsys sr_ff_tb --stop-time=100ns --vcd=sr_ff.vcd
```

## 8-Bit Square Root
* [Reference](https://www.csee.umbc.edu/portal/help/VHDL/samples/samples.shtml#sqrt8)
```sh
$ ghdl -a --ieee=synopsys sqrt8.vhdl
$ ghdl -e --ieee=synopsys sqrt8
$ ghdl -r --ieee=synopsys sqrt8 --stop-time=512ns > sqrt8.out
$ cat sqrt8.out
$ ghdl -r --ieee=synopsys sqrt8 --stop-time=512ns --vcd=sqrt8.vcd
```
